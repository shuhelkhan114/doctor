# name: iOS workflow (TestFlight)

# on:
#   push:
#     branches:
#       - dev
#   pull_request:
#     branches:
#       - dev

# jobs:
# lint-and-compile:
#   runs-on: macos-latest
#   steps:
#     - name: 🏗 Setup repo
#       uses: actions/checkout@v3

#     - name: 🏗 Setup Node
#       uses: actions/setup-node@v3
#       with:
#         node-version: 16.x
#         cache: yarn

#     - name: 📦 Install dependencies
#       run: yarn install

#     - name: 📦 Prettify
#       run: |
#         NODE_OPTIONS="--max_old_space_size=4096" yarn prettify

#     - name: 📦 Lint
#       run: yarn lint

#     - name: 📦 Compile
#       run: yarn compile

# test:
#   runs-on: macos-latest
#   needs: [lint-and-compile]
#   steps:
#     - name: 🏗 Setup repo
#       uses: actions/checkout@v3

#     - name: 🏗 Setup Node
#       uses: actions/setup-node@v3
#       with:
#         node-version: 16.x
#         cache: yarn

#     - name: 📦 Install dependencies
#       run: yarn install

#     - name: 📦 Run Unit Tests
#       run: yarn test:ci

# deploy-to-testflight:
#   runs-on: macos-latest
#   if: ${{ github.ref == 'refs/heads/dev' }}
#   # needs: [test]
#   steps:
#     - name: 🏗 Setup repo
#       uses: actions/checkout@v3

#     - name: Print Xcode versions
#       run: ls -la /Applications | grep Xcode

#     # - name: Select Xcode version
#     #   run: sudo xcode-select -s '/Applications/Xcode_14.3.app/Contents/Developer'

#     - name: Print Xcode version
#       run: xcodebuild -version

#     - name: 🏗 Setup Node
#       uses: actions/setup-node@v3
#       with:
#         node-version: 16.x
#         cache: yarn

#     - name: Install dependencies
#       run: yarn install
#     - name: Build and deploy iOS app
#       run: cd ios && fastlane beta
